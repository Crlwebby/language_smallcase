## 复习题

#### 2.1节

##### R1. 列出5种非专用的因特网应用及它们所使用的应用层协议.

##### R2. 网络体系结构与应用程序体系结构之间有什么区别?

##### R3. 对两进程之间的通信会话而言, 哪个进程是客户, 哪个进程是服务器?

##### R4. 对一个P2P文件共享应用, 你同意"一个通信会话不存在客户端和服务器端的概念"的说法吗? 为什么?

##### R5. 运行在一台主机上的一个进程, 使用什么信息来标识运行在另一台主机上的进程?

##### R6. 假定你想尽快地处理从远程客户到服务器的事务, 你将使用UDP还是TCP? 为什么?

##### R7. 参见图2-4, 我们看到在该图中所列出的应用程序没有一个同时既要求无数据丢失又要求定时的. 你能设想一个既要求无数据丢失又高度时间敏感的应用程序吗?

##### R8. 列出一个运输协议能够提供的4种宽泛类型的服务. 对于每种服务类型, 指出是UDP还是TCP(或这两种协议)提供这样的服务?

##### R9. 前面讲过TCP能用SSL来强化, 以提供进程到进程的安全性服务, 包括加密. SSL运行在运输层还是应用层? 如果某应用程序研制者想要用SSL来强化UDP, 该研制者应当做些什么工作?

#### 2.2 ~ 2.4节

##### R10. 握手协议的作用是什么?

##### R11. 为什么HTTP, SMTP及POP3都运行在TCP上, 而不是在UDP上?

##### R12. 考虑一个电子商务网站需要保留每一个客户的购买记录. 描述如何使用cookie来完成该功能?

##### R13. 描述Web缓存器是如何减少接收被请求对象的延时的. Web缓存器将减少一个用户请求的所有对象或只是其中的某些对象的时延吗? 为什么?

##### R14. Telnet到一台Web服务器并发送一个多行的请求报文. 在该请求报文中包含If-modified-since: 首部行, 迫使响应报文中出现"304 Not Modified"状态代码.

##### R15. 列出几种流行的即时通信应用.它们使用相同的协议作为SMS吗?

##### R16. 假定Alice使用一个基于Web的电子邮件账户(例如Hotmail或Gmail)向Bob发报文, 而Bob使用POP3从他的邮件服务器访问自己的邮件. 讨论该报文是如何从Alice主机到Bob主机的. 要列出在两台主机间移动该报文时所使用的各种应用层协议.

##### R17. 将你最近收到的报文首部打印出来. 其中有多少Received: 首部行? 分析该报文的首部行中的每一行.

##### R18. 从用户的观点看, POP3协议中下载并删除模式和下载并保存模式有什么区别吗?

##### R19. 一个机构的Web服务器和邮件服务器可以有完全相同的主机名别名吗? 包含邮件服务器主机名的RR有什么样的类型?

##### R20. 仔细检查收到的电子邮件, 查找由使用.edu电子邮件地址的用户发送的报文首部. 从其首部, 能够确定发送该报文的主机的IP地址吗? 对于由Gmail账号发送的报文做相同的事.

#### 2.5节

##### R21. 在BitTorrent中, 假定Alice向Bob提供一个30秒间隔的文件块吞吐量. Bob将必须进行回报, 在相同的间隔中向Alice提供文件块吗? 为什么?

##### R22. 考虑一个新对等方Alice加入BitTorrent而不拥有任何文件块. 没有任何文件快, 因此她没有任何东西可上载, 她无法成为任何其他对等方的前4位上载者. 那么Alice是怎样得到她的第一个文件块呢?

##### R23. 覆盖网络是什么? 它包括路由器吗? 在覆盖网络中边是什么?

#### 2.6节

##### R24. CDN通常采用两种不同的服务器放置方法之一. 列举并简单描述它们.

##### R25. 除了如时延, 丢包和带宽性能等网络相关的考虑外, 设计一种CDN服务器选择策略时还有其他重要因素. 它们是什么?

#### 2.7节

##### R26. 2.7节中所描述的UDP服务器仅需要一个套接字, 而TCP服务器需要两个套接字. 为什么? 如果TCP服务器支持n个并行连接, 每条连接来自不同的客户主机, 那么TCP服务器需要多少个套接字.

##### R27. 对于2.7节所描述的运行在TCP之上的客户-服务器应用程序, 服务器程序为什么必须先于客户程序运行? 对于运行在UDP之上的客户-服务器应用程序, 客户程序为什么可以先于服务器程序运行.

## 习题

##### **P1、是非判断题**

###### a.	假设用户请求由一些文本和3幅图片组成的Web页面。对于这个页面，客户将发送一个请求报文并接受4个响应报文。

###### b.	 两个不同的Web页面可以通过一个持久连接发送

###### c. 	在浏览器和初始服务器之间使用非持久连接的话，一个TCP报文段可能携带两个不同的HTTP服务请求报文

###### d.	HTTP响应报文中的Date：首部指出了该报文中的对象最后一次修改的时间

###### e.	HTTP响应报文决不会具有空的报文体

##### **P2.	SMS、iMessage和WhatsApp都是稚嫩手机即时通信系统。在因特网上进行一些研究后，为这些系统分别写一段它们所使用协议的文字，然后撰文解释它们的差异所在。**

##### **P3.	考虑一个要获取给定的URL的Web文档的HTTP用户。该HTTP服务器的IP地址开始时并不知道，在这种情况下，除了HTTP外，还需要什么运输层和应用层协议？**

##### **P4.	考虑当浏览器发送一个HTTP GET报文时，通过Wireshark俘获到下列ASCII字符串（即这是一个HTTP GET报文的实际内容）。字符<cr><lf>是回车和换行符（即下面文本中的斜体字符串<cr>表示了单个回车符，该回车符包含在HTTP首部中的相应位置）。回答下列问题，指出你在下面HTTP GET报文中找到答案的地方。**

```http
GET /cs453/index.html HTTP/1.1<cr><lf>
Host: gaia.cs.umass.edu<cr><lf>
User-Agent: Mozilla/5.0 (Windows;U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax) <cr><lf>
Accept:ext/xml, application/xml, application/xhtml+xml, text/html;q=0.9, text/plain;q=0.8,image/png,*/*;q=0.5<cr><lf>
Accept-Language: en-us, en;q=0.5<cr><lf>
Accept-Encoding: zip, deflate<cr><lf>Accept-Charset: ISO-8859-1, utf-8;q=0.7,*;q=0.7<cr><lf>
Keep-Alive: 300<cr><lf>
Connection:keep-alive<cr><lf><cr><lf>
```

###### **a.	由浏览器请求的文档的URL是什么？**

###### **b.	该浏览器运行的是HTTP的何种版本？**

###### **c.	该浏览器请求的是一条非持续连接还是一条持续连接？**

###### **d.	该浏览器所运行的主机的IP地址是什么？**

###### **e.	发起该报文的浏览器的类型是什么？在一个HTTP请求报文中，为什么需要浏览器类型？**

##### **P5.	下面文本中显示的是来自服务器的回答，以响应上述问题中HTTP GET报文。回答下列问题，指出你在下面报文中找到答案的地方。**

```http
HTTP/1.1 200 OK<cr><lf>
Date: Tue, 07 Mar 2008 12:39:45GMT<cr><lf>
Server: Apache/2.0.52 (Fedora)<cr><lf>
Last-Modified: Sat, 10 Dec2005 18:27:46GMT<cr><lf>
ETag: ”526c3-f22-a88a4c80”<cr><lf>
Accept-Ranges: bytes<cr><lf>Content-Length: 3874<cr><lf>
Keep-Alive: timeout=max=100<cr><lf>
Connection:Keep-Alive<cr><lf>
Content-Type: text/html; charset=ISO-8859-1<cr><lf><cr><lf>
<!doctype html public ”-//w3c//dtd html 4.0 transitional//en”><lf>
<html><lf>
<head><lf> <meta http-equiv=”Content-Type”content=”text/html; charset=iso-8859-1”><lf> 
<metaname=”GENERATOR” content=”Mozilla/4.79 [en] (Windows NT
5.0; U) Netscape]”><lf> 
<title>CMPSCI 453 / 591 /NTU-ST550ASpring 2005 homepage</title><lf>
</head><lf>
<much more document text following here (not shown)>
```

###### **a.	服务器能否成功地找到那个文档？该文档提供回答是什么时间？**

###### **b.	该文档最后修改是什么时间？**

###### **c.	文档中被返回的字节有多少？**

###### **d.	文档被返回的前5个字节是什么？该服务器同意一条持续连接吗？**

**P6.	获取HTTP/1.1规范（RFC 2616）。回答下面问题：**

###### **a.	解释在客户和服务器之间用于指示关闭持续连接的信令机制。客户、服务器或两者都能发送信令通知连接关闭了吗？**

###### **b.	HTTP提供了什么加密服务？**

###### **c.	一个客户能够与一个给定的服务器打开3条或更多条并发连接吗？**

###### **d.	如果一个服务器或一个客户检测到连接已经空闲一段时间，该服务器或客户可以关闭两者之间的传输连接。一侧开始关闭连接而另一侧通过该连接传输数据是可能的吗？请解释。**

##### **P7.	假定你在浏览器中点击一条超链接获得Web页面。相关联的URL的IP地址没有缓存在本地主机上，因此必须使用DNS lookup以获得该IP地址。如果主机从DNS得到IP地址之前已经访问了n个DNS服务器；相继产生的RTT依次为RTT1、…、RTTn。进一步假定与链路相关的Web页面只包含一个对象,即由少量的HTML文本组成。令RTT0表示本地主机和包含对象的服务器之间的RTT值。假定该对象传输时间为零，则从客户点击该超链接到它接收到该对象需要多长时间？**

**P8.	参照习题7，假定在同一个服务器上某HTML文件引用了8个非常小的对象。忽略发送时间，在下列情况下需要多长时间？**

###### **a.	没有并行TCP连接的非持续HTTP**

###### **b.	配置有5个并行连接的非持久HTTP**

###### **c. 	持续HTTP**

##### **P9.	考虑图2-12，其中有一个机构的网络和因特网相连。假定对象的平均长度为850 000比特，从这个机构网的浏览器到初始服务器的平均请求率是每秒16个请求。还假定从接入链路的因特网一侧的路由器转发一个HTTP请求开始，到接收到其响应的平均时间是3秒（参见2.2.5节）。将总的平均响应时间建模为平均接入时延（即从因特网路由器到机构路由器的时延）和平均因特网时延之和。对于平均接入时延，使用Δ/(1－Δβ)，式中Δ是跨越接入链路发送一个对象的平均时间，β是对象对该接入链路的平均到达率。**

###### **a.	求出总的平均响应时间。**

###### **b.	现在假定在这个机构LAN中安装了一个缓存器。假定命中率为0.4，求出总的响应时间。**

##### P10.	考虑一条10米短链路，某发送方经过它能够以150bps速率双向传输。假定包含数据的分组是100000比特长，仅包含控制（如ACK或握手）的分组是200比特长。假定N个并行连接每个都获得1/N的链路带宽。现在考虑HTTP协议，并且假定每个下载对象是100Kb长，这些初始下载对象包含10个来自相同发送方的引用对象。在这种情况下，经非持续HTTP的并行实例的并行下载有意义吗？现在考虑持续HTTP。你期待这比非持续的情况有很大增益吗？评价并解释你的答案。

##### P11.	考虑在前一个习题中引出的情况。现在假定该链路由Bob和4个其他用户所共享。Bob使用非持续HTTP的并行实例，而其他4个用户使用无并行下载的非持续HTTP。

###### a.	Bob的并行连接能够帮助他更快地得到Web页面吗？

###### b.	如果所有5个用户打开5个非持续HTTP井行实例，那么Bob的并行连接仍将是有益的吗？为什么？

##### P12.	写一一个简单的TCP程序，使服务器接收来自客户的行并将其打印在服务器的标准输出上。（可以通过修改本书中的TCPServer.py程序实现上述任务。）编译并执行你的程序。在另一台有浏览器的机器上，设置浏览器的代理服务器为你正在运行服务器程序的机器，同时适当地配置端口号。这时你的浏览器向服务器发送GET请求报文，你的服务器应当在其标准输出上显示该报文。使用这个平台来确定你的浏览器是否对本地缓存的对象产生了条件GET报文。

**P13.	SMTP中的MAILFROM与该邮件报文自身中的From：之间有什么不同？**

**P14.	SMTP是怎样标识一个报文体结束的？HTTP是怎样做的呢？HTTP能够使用与SMTP标识一个报文体结束相同的方法吗？试解释。**

##### P15.	阅读用于SMTP的RFC 5321。MTA代表什么？考虑下面收到的垃圾邮件（从一份真实垃圾邮件修改得到）。假定这封垃圾邮件的唯一始作俑者是恶意的，而其他主机是诚实的，指出产生了这封垃圾邮件的恶意主机。

```
From - Fri Nov 07 13:41:30 2008
Return-Path: <tennis5@pp33head.com>
Received: from barmail.cs.umass.edu (barmail.cs.umass.edu
[128.119.240.3]) by cs.umass.edu (8.13.1/8.12.6) for
<hg@cs.umass.edu>; Fri, 7 Nov 2008 13:27:10 -0500
Received: from asusus-4b96 (localhost [127.0.0.1]) by
barmail.cs.umass.edu (Spam Firewall) for <hg@cs.umass.edu>; Fri, 7
Nov 2008 13:27:07 -0500 (EST)
Received: from asusus-4b96 ([58.88.21.177]) by barmail.cs.umass.edu
for <hg@cs.umass.edu>; Fri, 07 Nov 2008 13:27:07 -0500 (EST)
Received: from [58.88.21.177] by inbnd55.exchangeddd.com; Sat, 8
Nov 2008 01:27:07 +0700
From: ”Jonny” <tennis5@pp33head.com>
To: <hg@cs.umass.edu>
Subject: How to secure your savings
```

##### P16.	阅读POP3的RFC，即RFC 1939。UIDL POP3命令的目的是什么？

##### P17.	考虑用POP3访问你的电子邮件。

###### 	a.	假定你已经配置以下载并删除模式运行的POP邮件客户。完成下列事务：

```
C: list
S: 1 498
S: 2 912
S: .
C: retr 1
S: blah blah ...
S: ..........blah
S: .
?
?
```

###### b.	假定你已经配置以下载并保持模式运行的POP邮件客户。完成下列事务：

```
C: list
S: 1 498
S: 2 912
S: .
C: retr 1
S: blah blah ...
S: ..........blah
S: .
?
?
```

##### P18.	如题：

###### 	a.	什么是whois数据库？

###### 	b.	使用因特网上的各种whois数据库，获得两台DNS服务器的名字。指出你使用的是哪个whois数据库。

###### 	c.	你本地机器上使用nslookup向3台DNS服务器发送DNS查询：你的本地DNS服务器和两台你在(b)中发现的DNS服务器。尝试对类型A、NS和MX报告进行查询。总结你的发现。

###### 	d.	使用nslookup找出一台具有多个IP地址的Web服务器。你所在的机构（学校或公司）的Web服务器具有多个IP地址吗？

###### 	e.	使用ARIN whois数据库，确定你所在大学使用的IP地址范围。

###### 	f.	描述一个攻击者在发动攻击前，能够怎样利用whois数据库和nslookup工具来执行对一个机构的侦察。

###### 	g.	讨论为什么whois数据库应当为公众所用。

##### P19.	在本习题中，我们使用在Unix和Linux主机上可用的dig工具来探索DNS服务器的等级结构。图2-21讲过，在DNS等级结构中较高的DNS服务器授权对该等级结构中较低DNS服务器的DNS请求，这是通过向DNS客户发送回那台较低层次的DNS服务器的名字来实现的。先阅读dig的帮助页，再回答下列问题。

##### 	a.	从一台根DNS服务器（从根服务器［a-m］.root-server.net之一）开始，通过使用dig得到你所在系的Web服务器的IP地址，发起一系列查询。显示回答你的查询的授权链中的DNS服务器的名字列表。

##### 	b.	对几个流行Web站点如google.com、yahoo.com或amazon.com，重复上一小题。

##### P20.	假定你能够访问所在系的本地DNS服务器中的缓存。你能够提出一种方法来粗略地确定在你所在系的用户中最为流行的Web服务器（你所在系以外）吗？解释原因。

##### P21.	假设你所在系具有一台用于系里所有计算机的本地DNS服务器。你是普通用户（即你不是网络/系统管理员）。你能够确定是否在几秒钟前从你系里的一台计算机可能访问过一台外部Web站点吗？解释原因。

##### P22.	考虑向N个对等方分发F=15Gb的一个文件。该服务器具有us=30Mbps的上载速率，每个对等方具有di=2Mbps的下载速率和上载速率u。对于N=10、100和1000并且u=300kbps、700kbps和2Mbps，对于N和u的每种组合绘制出确定最小分发时间的图表。需要分别针对客户-服务器分发和P2P分发两种情况制作。

##### P23.	考虑使用一种客户-服务器体系结构向N个对等方分发一个F比特的文件。假定一种流体模型，即某服务器能够同时向多个对等方传输，只要组合速率不超过us，则以不同的速率向每个对等方传输。

###### a.	假定us/N≤d_min。定义一个具有NF/us分发时间的分发方案。

###### b.	假定us/N≥d_min。定义一个具有F/d_min分发时间的分发方案。

###### c.	得出最小分发时间通常是由max{NF/us,F/d_min}所决定的结论。

##### P24.	考虑使用P2P体系结构向N个用户分发F比特的一个文件。假定一种流体模型。为了简化起见，假定dmin很大，因此对等方下载带宽不会成为瓶颈。

###### a.	假定us≤(us+u1+…+uN)/N。定义一个具有F/us分发时间的分发方案。

###### b.	假定us≥(us+u1+…+uN)/N。定义一个具有NF/(us+u1+…+uN)分发时间的分发方案。

###### c.	得出最小分发时间通常是由max{F/us,NF/(us+u1+…+uN)}所决定的结论。

##### P25.	考虑在一个有N个活跃对等方的覆盖网络中，每对对等方有一条活跃的TCP连接。此外，假定该TCP连接通过总共M台路由器。在对应的覆盖网络中，有多少结点和边？

##### P26.	假定Bob加入BitTorrent，但他不希望向任何其他对等方上载任何数据（因此称为搭便车）。

###### 	a.	Bob声称他能够收到由该社区共享的某文件的完整副本。Bob所言是可能的吗？为什么？

###### 	b.	Bob进一步声称他还能够更为有效地进行他的“搭便车”，方法是利用所在系的计算机实验室中的多台计算机（具有不同的IP地址）。他怎样才能做到这些呢？

##### P27.	考虑一个具有N个视频版本（具有N个不同的速率和质量）和N个音频版本（具有N个不同的速率和质量）的DASH系统。假设我们想允许播放者在任何时间选择N个视频版本和N个音频版本之一：

###### 	a.	如果我们生成音频与视频混合的文件，因此服务器在任何时间仅发送一个媒体流，该服务器将需要存储多少个文件（每个文件有一个不同的URL）？

###### 	b.	如果该服务器分别发送音频流和视频流并且与客户同步这些流，该服务器将需要存储多少个文件？

##### P28.	在一台主机上安装编译TCPClient和UDPClient Python程序，在另一台主机上安装编译TCPServer和UDPServer程序。

###### 	a.	如果你在运行TCPServer之前运行TCPClient，将发生什么现象？为什么？

###### 	b.	如果你在运行UDPServer之前运行UDPClient，将发生什么现象？为什么？

###### 	c.	如果你对客户端和服务器端使用了不同的端口，将发生什么现象？

##### P29.	假定在UDPClient.py中在创建套接字后增加了下面一行：

```python
clientSocket.bind(("", 5432))
```

##### 有必要修改UDPServer.py吗？UDPClient和UDPServer中的套接字端口号是多少？在变化之前它们是多少？

##### P30.	你能够配置浏览器以打开对某Web站点的多个并行连接吗？有大量的并行TCP连接的优点和缺点是什么？

##### P31.	我们已经看到因特网TCP套接字将数据处理为字节流，而UDP套接字识别报文边界。面向字节API与显式识别和维护应用程序定义的报文边界的API相比，试给出一个优点和一个缺点。

##### P32.	什么是Apache Web服务器？它值多少钱?它当前有多少功能？为回答这个问题，你也许要看一下维基百科。

