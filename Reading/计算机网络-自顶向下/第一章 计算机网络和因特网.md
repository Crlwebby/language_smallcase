## 复习题

#### 1.1节

##### R1.	“主机”和“端系统”之间有什么不同？列举几种不同类型的端系统。web服务器是一种端系统吗？

​	主机和端系统是一样的。

##### R2.	“协议”一词常被用于描述外交关系。维基百科是怎样描述外交协议的。

##### R3.	标准对于协议为什么重要？

#### 1.2节

##### R4.	列出6种接入技术，将它们分为住宅接入，公司接入或广域无线网络接入。

##### R5.	HFC传输速率在用户间是专用的还是共享的？在下行HFC信道中，可能出现碰撞吗？为什么？

##### R7.	以太LAN的传输速率是多少

##### R8.	能够运行以太网的一些物理媒体是什么？

##### R9.	拨号调制解调器，HFC，DSL和FTTH都用于住宅接入，对于这些技术中的每一种，给出传输速率的范围，并讨论有关带宽是共享的还是专用的

#### 1.3节

##### R11.	假定在发送主机和接收主机间只有一台分组交换机。发送主机和交换机间以及交换机和接收主机间的传输速率分别是R1和R2。假设该交换机使用存储转发分组交换方式，发送一个长度为L的分组的端到端总时延是什么？（忽略排队时延，传播时延和节点处理时延）

##### R12.	与分组交换网络相比，电路交换网络有哪些优点？在电路交换网络中，TDM比FDM有哪些优势？

##### R13.	假定用户共享一条2Mbps链路。同时假定当每个用户传输时连续以1Mbps传输，但每个用户仅传输20%的时间。

###### 		a.	 当使用电路交换时，能够支持多少用户？

###### 		b.	 作为该题的遗留问题，假定使用分组交换。为什么如果两个或更少的用户同时传输的话，在链路前面基本没有排队时延？为什么如果3个用户同时传输的话，将会有排队时延？

###### 		c.	 求出某指定用户正在传输的概率。

###### 		d.	 假定现在有3个用户。求出在任何给定时间，所有3个用户在同时传输的概率。求出队列增长的时间比率。

##### R14.	为什么在等级结构相同级别的两个ISP通常互相对等？某IXP是如何挣钱的？

##### R15.	某些内容提供商构建了自己的网络。描述谷歌的网络。内容提供商构建这些网络的动机是什么？

#### 1.4节

##### R16.	考虑从某源主机跨越一条固定路由向某目的主机发送一分组。列出端到端时延组成部分。这些时延中的哪些是固定的，哪些是变化的？

##### R17.	访问在配套Web网站上有关传输时延与传播时延的Java小程序。在可用速率、传播时延和可用的分组长度之中找出一种组合，使得该分组的第一个比特到达接收方之前发送方结束了传输。找出另一种组合，使得发送方完成传输之前，该分组的第一个比特到达了接收方。

##### R18.	一个长度为1000字节的分组经距离2500km的链路传播，传播速率为2.5x10^8m/s并且传输速率为2Mbps，它需要多长时间？更为一般地，一个长度为L的分组经距离为d的链路传播，传输速率为s并且传播速率为Rbps，它需要用多长时间？该时延与传输速率相关吗？

##### R19.	假定主机A要向主机B发送一个大文件。从主机A到主机B的路径上有3段链路，其速率分别为R1 = 500kbps，R2 = 2Mbps，R3 = 1Mbps。

###### 	a. 	假定该网络中没有其他流量，该文件传送的吞吐量是多少？

###### 	b. 	假定该文件为4MB。传输该文件到主机B大致需要多长时间？

###### 	c. 	重复(a)和(b)，只是这时R2减小到100kbps。

##### R20.	假定端系统A要向端系统B发送一个大文件。在一个非常高的层次上，描述端系统怎样从该文件生成分组。当这些分组之一到达某分组交换机时，该交换机使用分组中的什么信息来决定将该分组转发到哪一条路上？因特网中的分组交换为什么可以与驱车从一个城市到另一个城市并沿途询问方向相类比？

##### R21.	访问配套Web站点的排队和丢包Java小程序。最大发送速率和最小的传输速率是什么？对于这些速率，流量强度是多少？用这些速率运行该Java小程序并确定出现丢包要花费多长时间？然后第二次重复该实验，再次确定出现丢包花费多长时间。这些值有什么不同？为什么会有这种现象？

#### 1.5节

##### R22.	列出一个层次能执行的5个任务。这些任务中的一个（或两个）可能由两个（或更多）层次执行吗？

##### R23.	因特网协议栈中的5个层次有哪些？在这些层次中，每层的主要任务是什么？

##### R24.	什么是应用层报文？什么是传输层报文段？什么是网络层数据报？什么是链路层帧？

##### R25.	路由器处理因特网协议栈中的哪些层次？链路层交换机处理的是哪些层次？主机处理的是哪些层次？

#### 1.6节

##### R26.	病毒和蠕虫之间有什么不同？

##### R27.	描述如何产生一个僵尸网络，以及僵尸网络是怎样被用于DDoS攻击的。

##### R28.	假定Alice和Bob经计算机网络相互发送分组。假定Trudy将自己安置在网络中，使得她能够俘获由Alice发送的所有分组，并发送她希望给Bob的东西；她也能俘获Bob发送的所有分组，并发送她希望给Alice的东西。列出在这种情况下Trudy能够做的某些恶意的事情。

## 习题

**P2.	式（1-l）给出了经传输速率为R的N段链路发送长度L的一个分组的端到端时延。对于经过N段链路连续地发送P个这样的分组，一般化地表示出这个公式**
$$
d_{端到端} = N\frac{L}{R}\tag{1-1}
$$


##### P3.	考虑一个应用程序以稳定的速率传输数据（例如，发送方每k个时间单元产生一个N比特的数据单元，其中k较小且固定）。另外，当这个应用程序启动时，它将连续运行相当长的一段时间。回答下列问题，简要论证你的回答：

###### a.	是分组交换网还是电路交换网更为适合这种应用？为什么？

###### b.	假定使用了分组交换网，并且该网中的所有流量都来自如上所述的这种应用程序。此外，假定该应用程序数据传输速率的总和小于每条链路的各自容量。需要某种形式的拥塞控制吗？为什么？

##### P4.	考虑在图1-13中的电路交换网。回想在每条链路上有4条链路，以顺时针方向标记四台交换机A、B、C和D。

###### a.	在该网络中，任何时候能够进行同时连接的最大数量是多少？

###### b.	假定所有连接位于交换机A和C之间。能够进行同时连接的最大数量是多少？

###### c.	假定我们要在交换机A和C之间建立4条连接，在交换机B和D之间建立另外4条连接。我们能够让这些呼叫通过这4条链路建立路由以容纳所有8条连接吗？

##### P5.	回顾在l.4节中的车队的类比。假定传播速度还是100km/h。

###### a.	假定车队旅行150km：在一个收费站前面开始，通过第二个收费站，并且在第三个收费站后面结束。其端到端时延是多少？

###### b.	重复（a），现在假定车队中有8辆汽车而不是10辆。**

##### P6.	这个习题开始探讨传播时延和传输时延，这是数据网络中的两个重要概念。考虑两台主机A和B由一条速率为Rbps的链路相连。假定这两台主机相隔m米，沿该链路的传播速率为s m/s。主机A向主机B发送长度L比特的分组。

###### a.	用m和s来表示传播时延d_prop。

###### b.	用L和R来确定该分组的传输时间d_trans。

###### c.	忽略处理和排队时延，得出端到端时延的表达式。

###### d.	假定主机A在时刻t=0开始传输该分组。在时刻t=d_trans，该分组的最后一个比特在什么地方？

###### e.	假定d_prop大于d_trans。在时刻t=d_trans，该分组的第一个比特在何处？

###### f.	假定d_prop小于d_trans。在时刻t=d_trans，该分组的第一个比特在何处？

###### g.	假定s=2.5×10^8，L=l20比特，R=56kbps。求出使d_prop等于d_trans的距离m。

##### P7.	在这个习题中，我们考虑从主机A向主机B通过分组交换网发送语音（VolP）。主机A将模拟语音转换为传输中的64kbps数字比特流。然后主机A将这些比特分为56字节的分组。A和B之间有一条链路：它的传输速率是2Mbps，传播时延是10ms。一旦A收集了一个分组，就将它向主机B发送。一旦主机B接收到一个完整的分组，它将该分组的比特转换成模拟信号。从比特产生（从位于主机A的初始模拟信号起）的时刻起，到该比特被解码（在主机B上作为模拟信号的一部分），花了多少时间？

##### P8.	假定用户共享一条3Mbps的链路。又设每个用户传输时要求150kbps，但是每个用户仅有10%的时间传输。（参见1.3节中关于“分组交换与电路交换的对比”的讨论。）

###### a.	当使用电路交换时，能够支持多少用户？

###### b.	对于本习题的后续小题，假定使用分组交换。求出给定用户正在传输的概率。

###### c.	假定有120个用户。求出在任何给定时刻，实际有n个用户在同时传输的概率。（提示：使用二项式分布。）

###### d.	求出有21个或更多用户同时传输的概率。

##### P9.	考虑在1.3节“分组交换与电路交换的对比”的讨论中，给出了一个具有一条1Mbps链路的例子。用户在忙时以100kbps速率产生数据，但忙时仅以p=0.1的概率产生数据。假定用1Gbps链路替代1Mbps的链路。

###### a.	当采用电路交换技术时，能被同时支持的最大用户数量N是多少？

###### b.	现在考虑分组交换和有M个用户的情况。给出多于N用户发送数据的概率公式（用p、M、N表示）。

##### P10.	考虑一个长度为L的分组从端系统A开始，经3段链路传送到目的端系统。令d_i、s_i，和R_i，表示链路i的长度、传播速度和传输速率（i=1，2，3）。该分组交换机对每个分组的时延为d_proc。假定没有排队时延，根据d_i、s_i，R_i（i=1，2，3）和L，该分组总的端到端时延是什么？现在假定该分组是1500字节，在所有3条链路上的传播时延是2.5×10’m／s，所有3条链路的传输速率是2Mbps，分组交换机的处理时延是3ms，第一段链路的长度是5000km，第二段链路的长度是4000km，并且最后一段链路的长度是1000km。对于这些值，该端到端时延为多少？

**P11.	在上述习题中，假定R1=R2=R3=R且d_proc=0。进一步假定该分组交换机不存储转发分组，而是在等待分组到达前立即传输它收到的每个比特。这时端到端时延为多少？**

##### P12.	一台分组交换机接收一个分组并决定该分组应当转发的出链路。当某分组到达时，另一个分组正在该出链路上被发送到一半，还有4个其他分组正等待传输。这些分组以到达的次序传输。假定所有分组是1500字节并且链路速率是2Mbps。该分组的排队时延是多少？在更一般的情况下，当所有分组的长度是L，传输速率是R，当前正在传输的分组已经传输了x比特，并且已经在队列中有n个分组，其排队时延是多少？

**P13.**

###### 	a.	假定有N个分组同时到达一条当前没有分组传输或排队的链路。每个分组长为L，链路传输速率为R。对N个分组而言，其平均排队时延是多少？

###### 	b.	现在假定每隔LW/R秒有N个分组同时到达链路。一个分组的平均排队时延是多少？**

**P14.	考虑路由器缓存中的排队时延。令I表示流量强度；即l=La/R。假定排队时延的形式为IL/R（1-l），其中I<1。
a.	写出总时延公式，即排队时延加上传输时延。
b.	以L/R为函数画出总时延的图。**

**P15.令a表示在一条链路上分组的到达率（以分组/秒计），令u表示一条链路上分组的传输率（以分组/秒计）。基于上述习题中推导出的总时延公式（即排队时延加传输时延），推导出以a和u表示的总时延公式。**

##### P16.考虑一台路由器缓存前面的一条出链路。在这个习题中，将使用李特尔（Little）公式，这是排队论中的一个著名公式。令N表示在缓存中的分组加上被传输的分组的平均数。令a表示到达链路的分组速率。令d表示一个分组历经的平均总时延（即排队时延加传输时延）。李特尔公式是N=a×d。假定该缓存平均包含10个分组，并且平均分组排队时延是10ms。该链路的传输速率是100分组/秒。使用李特尔公式，在没有丢包的情况下，平均分组到达率是多少？

**P17.**

###### 	a.	对于不同的处理速率、传输速率和传播时延，给出l.4.3节中式（1-2）的一般表达式。

###### 	b.	重复（a），不过此时假定在每个结点有平均排队时延m…**

##### P18.	在一天的3个不同的小时内，在同一个大陆上的源和目的地之间执行Traceroute。

###### 	a.	在这3个小时的每个小时中，求出往返时延的均值和方差。

###### 	b.	在这3个小时的每个小时中，求出路径上的路由器数量。在这些时段中，该路径发生变化了吗？

###### 	c.	试图根据源到目的地Traceroute分组通过的情况，辨明ISP网络的数量。具有类似名字和/或类似的IP地址的路由器应当被认为是同一个ISP的一部分。在你的实验中，在相邻的ISP间的对等接口处出现最大的时延了吗？

###### 	d.	对位于不同大陆上的源和目的地重复上述内容。比较大陆内部和大陆之间的这些结果。

##### P19.

###### 	a.	访问站点www.traceroule.org，并从法国两个不同的城市向位于美国的相同的目的主机执行Traceroute。在这两个Traceroute中，有多少条链路是相同的？大西洋沿岸国家的链路相同吗？

###### 	b.	重复（a），但此时选择位于法国的一个城市和位于德国的另一个城市。

###### 	c.	在美国挑选一个城市，然后向位于中国的两个不同城市的主机执行Traceroute。在这两次Traceroute中有多少链路是相同的？在到达中国前这两个Traceroute分开了吗？

##### P20.	考虑对应于图1-20b吞吐量的例子。现在假定有M对客户-服务器而不是10对。用R_s、R_c和R分别表示服务器链路、客户链路和网绪链路的速率。假设所有的其他链路都有充足容量，并且除了由这M对客户-服务器产生的流量外，网络中没有其他流量。推导出由R_s、R_c、R和M表示的通用吞吐量表达式。

##### P21.	考虑图1-19b。现在假定在服务器和客户之间有M条路径。任两条路径都不共享任何链路。路径（k=1，…，M）是由传输速率为、(R_1)^k,(R_2)^k,……(R_N)^k的N条链路组成。如果服务器仅能够使用一条路径向客户发送数据，则该服务器能够取得的最大吞吐量是多少？如果该服务器能够使用所有/条路径发送数据，则该服务器能够取得的最大吞吐量是多少？

##### P22.	考虑图1-19b。假定服务器与客户之间的每条链路的丢包概率为p，且这些链路的丢包率是独立的。一个（由服务器发送的）分组成功地被接收方收到的概率是多少？如果在从服务器到客户的路径上分组丢失了，则服务器将重传该分组。平均来说，为了使客户成功地接收该分组，服务器将要重传该分组多少次？

##### P23.	考虑图1-19a。假定我们知道沿着从服务器到客户的路径的瓶颈链路是速率为R_s bps的第一段链路。假定我们从服务器向客户发送紧接着的一对分组，且沿这条路径没有其他流量。假定每个分组的长度为L比特，两条链路具有相同的传播时延d_prop。

###### 	a.	在目的地，分组的到达间隔时间有多大？也就是说，从第一个分组的最后一个比特到达到第二个分组最后一个比特到达所经过的时间有多长？

###### 	b.	现在假定第二段链路是瓶颈链路（即R_c<R_s）。第二个分组在第二段链路输入队列中排队是可能的吗？请解释原因。现在假定服务器在发送第一个分组T秒之后再发送第二个分组。为确保在第二段链路之前没有排队，T必须要有多长？试解释原因。

**P24.	假设你希望从波士顿到洛杉矶紧急传送40×10^12字节数据。你有一条100Mbps专用链路可用于传输数据。你是愿意通过这条链路传输数据，还是愿意使用FedEx一夜快递？解释你的理由。**

##### P25.	假定两台主机A和B相隔20000km，由一条直接的R=2Mbps的链路相连。假定跨越该链路的传播速率是2.5×10^8m／s

###### 	a.	计算带宽一时延积R * t_prop。

###### 	b.	考虑从主机A到主机B发送一个800 000比特的文件。假定该文件作为一个大的报文连续发送。在任何给定的时间，在链路上具有的比特数量最大值是多少？

###### 	c.	给出带宽一时延积的一种解释。

###### 	d.	在该链路上一个比特的宽度（以米计）是多少？它比一个足球场更长吗？

###### 	e.	根据传播速率s、带宽R和链路m的长度，推导出一个比特宽度的一般表示式。

##### **P26.	对于习题P25，假定我们能够修改R。对什么样的R值，一个比特的宽度能与该链路的长度一样长？**

##### P27.	考虑习题P25，但现在链路的速率是R=1Gbps。

###### 	a.	计算带宽一时延积R * d_prop.

###### 	b.	考虑从主机A到主机B发送一个800 000比特的文件。假定该文件作为一个大的报文连续发送。在任何给定的时间，在链路上具有的比特数量最大值是多少？

###### 	c.	在该链路上一个比特的宽度（以米计）是多少？

##### P28.	再次考虑习题P25。

###### 	a.	假定连续发送，发送该文件需要多长时间？

###### 	b.	假定现在该文件被划分为20个分组，每个分组包含40000比特。假定每个分组被接收方确认，确认分组的传输时间可忽略不计。最后，假定前一个分组被确认后，发送方才能发送分组。发送该文件需要多长时间？

###### 	c.	比较（a）和（b）的结果。

##### P29.	假定在同步卫星和它的地球基站之间有一条10Mbps的微波链路。每分钟该卫星拍摄一幅数字照片，并将它发送到基站。假定传播速率是2.4×10^8m／s。

###### 	a.	该链路的传播时延是多少？

###### 	b.	带宽一时延积R * d_prop是多少？

###### 	c.	若x表示该照片的大小。对于这条微波链路，能够连续传输的x最小值是多少？

**P30.	考虑1.5节中我们在分层讨论中对航线旅行的类比，随着协议数据单元向协议栈底层流动，首部在增加。随着旅客和行李移动到航线协议找底部，有与上述首部信息等价的概念吗？**

##### P31.	在包括因特网的现代分组交换网中，源主机将长应用层报文（如一个图像或音乐文件）分段为较小的分组并向网络发送。接收方则将这些分组重新装配为初始报文。我们称这个过程为根文分段。图1-27显示了一个报文在报文不分段或报文分段情况下的端到端传输。考虑一个长度为8×10^6比特的报文，它在图1-27中从源发送到目的地。假定在该图中的每段链路是2Mbps。忽略传播、排队和处理时延。

###### 	a.	考虑从源到目的地发送该报文且没有报文分段。从源主机到第一台分组交换机移动报文需要多长时间？记住，每台交换机均使用存储转发分组交换，从源主机移动该报文到目的主机需要多长时间？

###### 	b.	现在假定该报文被分段为800个分组，每个分组10000比特长。从源主机移动第一个分组到第一台交换机需要多长时间？从第一台交换机发送第一个分组到第二台交换机，从源主机发送第二个分组到第一台交换机各需要多长时间？什么时候第二个分组能被第一台交换机全部收到？

###### 	c.	当进行报文分段时，从源主机向目的主机移动该文件需要多长时间？将该结果与（a）的答案进行比较并解释之。

###### 	d.	除了减小时延外，使用报文分段还有什么原因？

###### 	e.	讨论报文分段的缺点。

**P32.	用本书的Web网站上的报文分段小Java小程序进行实验。该程序中的时延与前一个习题中的时延相当吗？链路传播时延是怎样影响分组交换（有报文分段）和报文交换的端到端总时延的？**

##### P33.	考虑从主机A到主机B发送一个F比特的大文件。A和B之间有两段链路（和两台交换机），并且该链路不拥塞（即没有排队时延）。主机A将该文件分为每个为S比特的报文段，并为每个报文段增加一个80比特的首部，形成L=80+S比特的分组。每条链路的传输速率为R bps。求出从A到B移动该文件时延最小的值S。忽略传播时延。

**P34.	Skype提供了一种服务，使你能用PC向普通电话打电话。这意味着语音呼叫必须通过因特网和电话网。讨论这是如何做到的。**